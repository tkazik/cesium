<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Use correct character set. -->
  <meta charset="utf-8">
  <!-- Tell IE to use the latest, best version. -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
  <title>Hello World!</title>
  <script src="../Build/Cesium/Cesium.js"></script>
  <style>
      @import url(../Build/Cesium/Widgets/widgets.css);
      html, body, #cesiumContainer {
          width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden;
      }
  </style>
</head>
<body>
  <div id="cesiumContainer"></div>
  <script>
  	console.log("start of script");

    var viewer = new Cesium.Viewer('cesiumContainer');
	
	
	
	//var locExton = Cesium.Cartesian3.fromDegrees(-75.62898254394531, 40.02804946899414, 0.0);
	var zrhLat = 8.546;
	var zrhLon = 47.458333;
  var zrhHeight = 10; // [m]
	
	var locZurich = Cesium.Cartesian3.fromDegrees(zrhLat, zrhLon, zrhHeight);
	viewer.camera.lookAt(locZurich, new Cesium.Cartesian3(0.0, -5000.0, 2000.0));

	//var modelMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(locZurich);

  // Get the transform from local heading-pitch-roll at cartographic (0.0, 0.0) to Earth's fixed frame.
  var center = Cesium.Cartesian3.fromDegrees(zrhLat, zrhLon, zrhHeight);
  var heading = -Cesium.Math.PI/2;
  var pitch = 0;
  var roll = Cesium.Math.PI/9;
  var hpr = new Cesium.HeadingPitchRoll(heading, pitch, roll);
  var modelMatrix = Cesium.Transforms.headingPitchRollToFixedFrame(center, hpr);
  
  
  
	var scene = viewer.scene;	
	var model = scene.primitives.add(Cesium.Model.fromGltf({
 	  //url : 'SampleData/models/myAnimation/A319_noAnimation.glb', // sun runs backward?! => nope ok
 	  //url : 'SampleData/models/engine_working_opt.glb', // check heading pitch roll axis (also weird?)
    //url : 'SampleData/models/cubes.glb',
    //url : 'SampleData/models/CesiumAir/Cesium_Air.gltf',
    url : 'SampleData/models/A319_GEN_wAnim.glb',
	  show : true,                     // default
	  modelMatrix : modelMatrix,
	  scale : 1.0,                     // double size
	  minimumPixelSize : 128,          // never smaller than 128 pixels
	  maximumScale: 20000,             // never larger than 20000 * model size (overrides minimumPixelSize)
	  allowPicking : false,            // not pickable
	  debugShowBoundingVolume : false, // default
	  debugWireframe : false
	}));

  /*
  // Play all animations at half-speed when the model is ready to render
  Cesium.when(model.readyPromise).then(function(model) {
    model.activeAnimations.addAll({
      speedup : 0.5,
      loop : Cesium.ModelAnimationLoop.REPEAT
    });
  }).otherwise(function(error){
    window.alert(error);
  });
	*/
  
  // Play all animations at half-speed when the model is ready to render
  
  console.log("nb animations outside ready: " + model.activeAnimations.length);
	
  console.log("end of script");
  </script>
</body>
</html>
